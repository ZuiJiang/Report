### 一.专题分析

#### 1.1选题的目标和意义

​	随着互联网进一步发展，越来越多的高校开始探索如何将传统教学和互联网相结合，由此诞生了网上慕课等一系列在线学习网站，服务一些想学习但苦于条件的大众，网上答题系统着眼于课下练习，利用互联网方便快捷的特性，提供学生一个在线练习题目的机会，并提供客观题评阅功能，如果遇到好的题目，也支持题目收藏功能，方便同学再次查阅，练习。在线答题系统旨在提供一个平台，题库来源于往年题目，面向大一大二等学习通识类课程的同学，方便他们练习，提升自我。

#### 1.2功能需求描述

##### 	1.2.1功能需求

​	由于时间原因。这次小组实验设计的在线答题系统提供的服务有限，系统侧重于提供用户			题目，方便用户在线练习，查看答案，收藏题目等行为。以下是用户可以使用的功能：

1. 用户可以在线答题

2. 用户可以收藏题目

3. 用户可以选择不同科目，不同试卷

4. 用户可以查询做题数量

5. 用户可以注册，修改，忘记密码

  ##### 1.2.2性能需求

  ​	该系统侧重于学生平时使用，因为目标用户为大一大二学生，需要存储大量的试题信     息，该系统需要同时满足题目的增添，编辑，删除，答题，评阅等功能，应保证正常的操作做出的反应在极短的时间内，以下是系统必须满足的约束：

  1. 查询应该在1s之内
  2. 新建用户，发送验证码整个流程应该在3分钟之内完成
  3. 删除信息应该在1s之内

  ##### 1.2.3数据要求

  系统中的对象有用户对象，试题对象，试卷对象。

  需要处理的信息有：

  1. 登录时检查输入账号是否存在，密码是否正确


  2. 提供注册功能


  3. 提供密码的更改，找回功能


  4. 用户可以在线答题


  5. 提供客观题的评阅功能


  6. 用户可以收藏和移去收藏

  系统应该产生的信息：

  1. 查询数据库中试卷信息，提供给用户


  2. 查询每个试卷中的题目信息，提供给用户


  3. 查询每个题目的细节信息，提供给用户


  4. 注册时发送验证码给用户


  5. 处理用户的作答结果，返回答案给用户


  6. 返回用户的收藏题目


#### 1.3功能分析建模

##### 	1.3.1系统流程图

​	系统提供用户的注册，修改密码，在遗忘密码情况下修改密码等功能，该功能在经过用户注册程序，用户修改程序，账号申诉程序与储存用户信息的数据库链接，进行数据库的增，改操作。用户进行试题选择，系统查询数据库后，经过试卷生成程序，展示给用户一套完整的试卷，在用户答题之后，经过答案核对程序，在查询数据库之后，展示给用户答题结果及解析。如果用户希望收藏题目并增加笔记，经过题目收藏程序，改变用户信息数据库，添加用户收藏。

​	系统流程图如下：

##### ![IMG_3219](./IMG_3219.PNG)

​	关键模块：

​	试卷生成程序：在接收到用户选择科目后，查询数据库中相应的的试题信息，组成试卷，展示给用户

​	答案核对程序：在接收到用户作答题目后，查询数据库中试题对应答案，核对答案后，展示给用户

##### 	1.3.2功能模型

​	用户输入用户名或者邮箱和密码进行登录，如果用户忘记密码，凭借邮箱和验证码修改密码，用户选择答题模式后选择答题科目，然后选择想要答题试卷，根据试卷ID，系统筛选试题信息，提供题目给用户作答，根据题目id，系统在数据库中核对答案，用户如果希望收藏题目，则将收藏题目id保存至系统数据库，并生成对应用户的收藏夹。

​	功能模型如下：

##### ![数据流图](./数据流图.png)

##### 	1.3.3数据模型

​	用户具有用户名，邮箱，密码和收藏夹等属性，题目有学科，题目id，答案，解析，所属试卷id，所属试卷年份属性，用户可以收藏题目，也可做题目。1个用户可以收藏多个题目，可以做多个题目，不同的用户可以做一个题目，不同的用户可以收藏一个题目，所以用户和题目是多对多的关系

​	数据模型如下：

​	![实体联系图](./实体联系图.png)

##### 	1.3.4行为模型

​	程序处于闲置状态，用户点击注册进入注册事件，输入注册信息，跳转到接受验证码阶段如果验证成功，添加用户信息，进入页面，用户选择答题或查看收藏，选择答题则选择答题科目，然后选择试卷，进行答题，答题之后可以查看答题结果，如果有需要用户可以进行收藏题目，在收藏夹中查看收藏题目信息。

​	行为模型如下：![状态转换图1](./状态转换图1.png)



#### 1.4非功能需求

​	空间：应该支持较多终端的同时访问，同时应保证后端服务平稳，稳定地运行在服务器上，并对于每次异常退出生成日志。

#### 1.5界面与接口需求

##### 	1.5.1界面需求

​	界面设计应该美观大方，简洁，同时应该有一定的审美基础，用户界面应该简单明了，对用户友好，易操作。不应该有过多的跳转界面，应及时对用户的操作作出响应，避免用户等待时间过长。

##### 	1.5.2接口需求

​	由于系统是网页的形式，采用了前后端分离的Resetful式架构，前后端信息仅通过Ajax传输，实现了模块之间较低的耦合程度。接口定义的信息如下

```` Json
POST{base_url}/user/login  //login request
POST{base_url}/user/register //register request
GET{base_url}/user/register //check exists email request
POST{base_url}/user/sendEmail //send email validate requeset
DELETE{base_url}/user/logout  //logout requeset
POST{base_url}/user/password  //changed password request
PUT{base_url}/user/password  //user forget password
GET{base_url}/course/course  //choose the coures
GET{base_url}/course/paper  //choose the paper
GET{base_rul}/course/infinite //choose the infinite mode
GET{base_url}/course/problem //choose the problem
POST{base_url}/course/judge //judge the answer
POST{base_url}/course/record //add this problem into record
GET{base_url}/course/record //get the user records
DELETE{base_url}/course/record //delete the record 
PUT{base_url}/course/record //change user's record 
````

### 二.专题设计

#### 2.1总体设计

##### 	2.1.1方案设计

​	方案一：采取前后端不分离的写法，每次数据传输到后端，后端返回一个新的页面。

​	方案二：采取前后端分离的写法，前端和后端是独立的模块，彼此分离，互不影响，数据交互采取ajax方法。

​	方案一是一般网站的架构方法，好处在于简单，方便，但是各部分耦合度较高，不符合软件工程方法学对模块之间复杂度的要求。方案二采取Ajax交互的方式，前后端仅有数据的交互，彼此分离，是一种数据耦合，符合软件工程方法学对模块间耦合度的要求，且可以合理分工，采用这种方式。

##### 	2.1.2软件结构设计

​	整个系统分成两个大的模块，分别是用户信息管理模块和答题模块，用户信息管理模块又可以细分成登录，注册，修改，申诉等四个模块，答题模块可以细分到答题，选题模块。答题模块和信息管理模块相对独立，并无干扰。

![Figure](./层次图.png)	

##### 	2.1.3数据库设计

​	考虑到用户信息有用户名，邮箱，密码，收藏夹，验证码等，由于采用django默认的用户信息管理系统所有设计的用户信息表如下。

​	用户表(User)：

| Field    | Type        | Key  | Default |
| -------- | ----------- | ---- | ------- |
| Id       | int(11)     | Pri  | <null>  |
| username | varchar(30) |      | <null>  |
| password | varchar(30) |      | <null>  |
| E-mail   | varchar(30) |      | <null>  |

​	由于支持发送验证码功能，所以设计邮箱-验证码表：

| Field    | Type        | Key  | Default |
| -------- | ----------- | ---- | ------- |
| id       | int(11)     | Pri  | <null>  |
| email    | varchar(30) |      | <null>  |
| Validate | varchar(4)  |      | <null>  |

​	用户具有收藏题目的功能，所以设计用户收藏表：

| Field    | Type        | Key  | Default |
| -------- | ----------- | ---- | ------- |
| id       | int(11)     | Pri  | <null>  |
| username | User        |      | <null>  |
| Problem  | problem     |      | <null>  |
| Note     | varchar(60) |      | <null>  |

​	考虑到卷子有科目，科目代号，年份，题目数量，试卷描述，所以设计试卷表：

| Field        | Type        | Key  | Default |
| ------------ | ----------- | ---- | ------- |
| id           | int(11)     | Pri  | <null>  |
| paper_title  | varchar(30) |      | <null>  |
| paper_course | varchar(30) |      | <null>  |
| paper_type   | int(11)     |      | <null>  |
| paper_year   | int(5)      |      | <null>  |

​	考虑到试题有试题类型，试题描述，试题题目，试题答案，试题顺序，外键是所属卷子，所以设计试题表：

| Field      | Type        | Key  | Default |
| ---------- | ----------- | ---- | ------- |
| id         | int(11)     | Pri  | <null>  |
| paper      | Paper       |      | <null>  |
| pro_des    | varchar(30) |      | <null>  |
| pro_detail | varchar(50) |      | <null>  |
| pro_ans    | varchar(50) |      | <null>  |
| pro_order  | int(11)     |      | <null>  |
| pro_type   | int(11)     |      | <null>  |

​	考虑到数据表中无法存储数组，故将每个题目的选项与题目相关联，试题是外键，设计选项-题目表：

| Field   | Type        | Key  | Default |
| ------- | ----------- | ---- | ------- |
| id      | int(11)     | Pri  | <null>  |
| option  | varchar(11) |      | <null>  |
| problem | Problem     |      | <null>  |
| order   | int(11)     |      | <null>  |

#### 2.2详细设计

##### 	2.2.1程序结构设计

##### 	2.2.2接口设计

##### 	2.2.3人机界面设计

### 三.专题实现

#### 3.1编程环境选择

​	经过分析，采用前后端分离的模式进行设计，前端选择了适用于快速开发的Vue框架，后端选择了集成较好的Django框架，交互数据采用Ajax交互方式，交互数据为json格式数据，数据存储方面，采用了django自带的SQLite3，可以较好的支持orm模式。

#### 3.2程序源代码

##### 3.2.1一号模块源代码

注册模块

##### 3.2.2二号模块源代码

判断模块

##### 3.2.3三号模块源代码

登录模块

##### 3.2.4四号模块源代码

选择无尽模式

### 四.专题测试

#### 4.1测试概述

​	测试是软件工程方法学中一个至关重要的步骤，关系着软件能否正确处理逻辑流程，能否在错误输入的情况下平稳运行并返回错误信息，一般而言测试方法有黑盒测试和白盒测试，非程序设计者进行的测试称为黑盒测试，程序设计者进行的测试称为白盒测试。本次实验分为前端和后端两个部分，前端开发者对后端进行了黑盒测试，后端开发者对前端进行了黑盒测试，又自身进行了白盒测试。进行白盒测试的方法是判定/条件覆盖，进行黑盒测试的方法是等价划分法和边界值分析法。

#### 4.2系统功能测试及结果分析

测试方法：黑盒测试

| 测试模块       | 测试结果 |
| ---------- | ---- |
| 后端注册模块     | 通过   |
| 后端登录模块     | 通过   |
| 后端修改模块     | 通过   |
| 后端申诉模块     | 通过   |
| 后端答题模块     | 通过   |
| 后端收藏模块     | 通过   |
| 前端登陆模块     | 通过   |
| 前端用户状态管理模块 | 通过   |
| 前端收藏模块     | 通过   |
| 前端数据交换模块   | 通过   |
| 前端路由控制模块   | 通过   |

#### 4.3系统的性能测试及结果分析

| 测试内容                | 测试结果 |
| ------------------- | ---- |
| 查询应在一秒之内            | 通过   |
| 整个注册，发送验证码服务应在3分钟之内 | 通过   |
| 删除应该在一秒之内           | 通过   |



#### 4.4系统运行展示

#### ![界面](./界面.png)

![界面](./界面2.png)

![界面](./界面3.png)

​	用户访问lapalaca.top进入主页面，选择登录后，登录系统，进入刷题页面，答题完毕后，可以交卷，得到答题结果，用户可以查看答题结果，并将题目加入收藏。

### 五.专题实验总结

#### 5.1专题要点

##### 	1.选题要点

​	选题应该切合当代主题，寻找生活中亟待解决或者可以优化的问题，选取的题目既不可以过于简单，浪费大量人力物力，也不可以过于好高骛远，眼高手低，最后无法完成任务。选题应该根据小组人数和组员能力，选取切合自身情况且可以紧密联系实际的问题，最后我们选择了在线答题系统这个既联系实践又切合成员水平的专题。

##### 	2.分析要点

​	进行题目分析时，我们采用了讨论，调查等方式了解到基本需求，在了解基本需求后，我们研究了"网易云课堂"，"中国大学MOOC"等一系列的类似教育平台，在了解了其基本的逻辑过程后，我们导出了新系统的数据流图和行为转化图并设计了实体联系图，在图形的帮助下，我们更加清楚的了解了系统的功能模型，行为模型和数据模型。这也为后来我们实现系统功能提供了帮助

##### 	3.设计要点

​	在进行总体设计时，我们利用E-R图设计了相应的数据库，并根据系统的行为模型和功能模型设计了相应的层次图。细分了模块，尽量做到了模块之间的低耦合，高内聚。采取了数据耦合的方式，降低了模块之间的耦合度，符合软件工程方法学的要求。层次图帮助我们理顺了系统各模块之间的调用关系，也方便我们设计模块之间的联系。

##### 	4.实现和测试要点

​	前端选用了传统的HTML+CSS+JavaScript方式，采用了最新流行的Vue框架，选用HTML是因为其简单，开发快速，可以快速得到较好的界面设计。使用Vue框架是因为其轻量，适用于快捷开发，内置的数据双向绑定和模板复用节省了前端开发者的精力，也提高了前端页面的可拓展性，针对日后不同的需求，也可以迅速做出扩展。后端采取python语言和django框架，选取python是因为其方便，简单，拥有丰富的扩展库和良好的社区资源，django强大的框架封装了一些常用的网络请求和数据处理，可以减少开发者在数据格式处理上精力。

#### 5.2专题实验总结	

​	1.需求分析得出的结果往往不是最终的结果，总会在不断开发，测试中回溯需求分析，改变系统的数据模型，功能模型和行为模型。

​	2.一个人进行测试往往不能覆盖所有情况，测试往往要不同的多个人进行测试，这样才可能暴露出设计中欠考虑的地方，进行完善处理

​	3.流程图可以较好的展示出系统流程，帮助处于不同角度的开发者理解系统，让其了解自己在开发中的流程，明晰逻辑。

​	4. 接口的定义影响着数据交互的内容，如何简明，高效的定义接口信息是需要我们不断学习的地方。